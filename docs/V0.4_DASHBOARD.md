# WealthTracker v0.4.0 - Dashboard Feature

## ğŸ“‹ Vue d'ensemble

La version **v0.4.0** introduit un **Dashboard complet** pour WealthTracker, offrant une vue d'ensemble professionnelle de votre portefeuille d'investissement avec des mÃ©triques en temps rÃ©el et des analyses de performance.

**Date de sortie** : 25 novembre 2025  
**Version** : 0.4.0  
**Statut** : âœ… Stable

---

## ğŸ¯ Objectifs de la fonctionnalitÃ©

Le Dashboard a Ã©tÃ© conÃ§u pour rÃ©pondre aux besoins suivants :

1. **Visualisation instantanÃ©e** de la valeur totale du portefeuille
2. **Calcul automatique** du Prix Moyen d'Achat (PMA) avec frais inclus
3. **Suivi des performances** avec plus/moins-values latentes
4. **Analyse dÃ©taillÃ©e** par actif avec mÃ©triques individuelles
5. **Interface moderne** avec design professionnel type Bloomberg Terminal

---

## âœ¨ FonctionnalitÃ©s principales

### 1. **KPI Cards - Vue synthÃ©tique** ğŸ“Š

Trois cartes animÃ©es affichant les mÃ©triques clÃ©s :

#### **Card 1 : Valeur Totale** (Gradient violet)

- Valeur actuelle du portefeuille en euros
- Nombre d'actifs en position ouverte
- IcÃ´ne : ğŸ’° DollarSign

#### **Card 2 : Montant Investi** (Gradient rose)

- Total investi (coÃ»t d'acquisition + frais)
- CalculÃ© avec le Prix Moyen d'Achat (PMA)
- IcÃ´ne : ğŸ· PiggyBank

#### **Card 3 : Plus/Moins-Value Latente** (Gradient dynamique)

- Montant en euros (â‚¬)
- Pourcentage de variation (%)
- **Vert** ğŸŸ¢ si positif, **Rouge** ğŸ”´ si nÃ©gatif
- IcÃ´ne dynamique : TrendingUp â†—ï¸ / TrendingDown â†˜ï¸

### 2. **Price Ticker Bloomberg** ğŸ“ˆ

- DÃ©placÃ© depuis TransactionsPage vers Dashboard
- DÃ©filement horizontal automatique des prix
- Mise Ã  jour en temps rÃ©el
- Indicateurs visuels de variation (ğŸŸ¢/ğŸ”´)

### 3. **Analyse dÃ©taillÃ©e par actif** ğŸ“‘

Menu dÃ©roulant/Accordion collapsible affichant :

| Colonne         | DonnÃ©es affichÃ©es                     |
| --------------- | ------------------------------------- |
| **Actif**       | Ticker, Nom, CatÃ©gorie (avec couleur) |
| **QuantitÃ©**    | QuantitÃ© nette dÃ©tenue                |
| **PMA**         | Prix Moyen d'Achat (avec frais)       |
| **Prix MarchÃ©** | Prix actuel du marchÃ©                 |
| **Valeur**      | Valeur actuelle + Montant investi     |
| **+/- Value**   | Plus/moins-value (â‚¬ et %) avec icÃ´ne  |

**FonctionnalitÃ©s** :

- Bordure gauche colorÃ©e selon la catÃ©gorie
- Animation au survol (translateX)
- Tri automatique par valeur dÃ©croissante
- Masquage des positions fermÃ©es (quantitÃ© = 0)

---

## ğŸ§® Formules de calcul

### **Prix Moyen d'Achat (PMA)**

```
PMA = (Î£(quantitÃ© Ã— prix) + Î£(frais)) / Î£(quantitÃ©)
```

**Exemple** :

- Achat 1 : 10 actions Ã  100â‚¬ (frais 5â‚¬) = 1 005â‚¬
- Achat 2 : 5 actions Ã  110â‚¬ (frais 3â‚¬) = 553â‚¬
- **Total** : 1 558â‚¬ / 15 actions = **103,87â‚¬ PMA**

### **Valeur actuelle**

```
Valeur actuelle = Prix du marchÃ© Ã— QuantitÃ© nette
```

### **Montant investi**

```
Montant investi = PMA Ã— QuantitÃ© nette
```

### **Plus/Moins-Value latente**

```
PnL = Valeur actuelle - Montant investi
PnL % = (PnL / Montant investi) Ã— 100
```

**Exemple** :

- QuantitÃ© : 15 actions
- PMA : 103,87â‚¬
- Prix marchÃ© : 120â‚¬
- **Valeur actuelle** : 120 Ã— 15 = 1 800â‚¬
- **Montant investi** : 103,87 Ã— 15 = 1 558,05â‚¬
- **PnL** : 1 800 - 1 558,05 = **+241,95â‚¬**
- **PnL %** : (241,95 / 1 558,05) Ã— 100 = **+15,53%**

---

## ğŸ—ï¸ Architecture technique

### **Nouveaux fichiers crÃ©Ã©s**

```
src/renderer/src/
â”œâ”€â”€ pages/
â”‚   â””â”€â”€ DashboardPage.tsx          (183 lignes) - Page principale Dashboard
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ PortfolioKPI.tsx          (135 lignes) - KPI Cards avec gradients
â”‚   â””â”€â”€ AssetPerformanceList.tsx  (210 lignes) - Tableau dÃ©taillÃ© accordion
â””â”€â”€ utils/
    â””â”€â”€ portfolioCalculations.ts   (130 lignes) - Logique de calcul PMA
```

### **Fichiers modifiÃ©s**

```
src/renderer/src/
â”œâ”€â”€ App.tsx                        - Ajout navigation Dashboard
â”œâ”€â”€ types/index.ts                 - Nouveaux types (AssetPerformance, PortfolioMetrics)
â””â”€â”€ pages/
    â””â”€â”€ TransactionsPage.tsx       - Suppression PriceTicker
```

### **Nouveaux types TypeScript**

#### `AssetPerformance`

```typescript
interface AssetPerformance {
  assetId: number
  ticker: string
  name: string
  categoryName: string
  categoryColor: string
  netQuantity: number
  currentPrice: number
  averageBuyPrice: number // PMA avec frais
  currentValue: number // Prix marchÃ© Ã— QuantitÃ©
  investedValue: number // PMA Ã— QuantitÃ©
  unrealizedPnL: number // PnL en euros
  unrealizedPnLPercent: number // PnL en pourcentage
}
```

#### `PortfolioMetrics`

```typescript
interface PortfolioMetrics {
  totalValue: number // Somme des valeurs actuelles
  totalInvested: number // Somme des montants investis
  unrealizedPnL: number // PnL global en euros
  unrealizedPnLPercent: number // PnL global en %
  assetCount: number // Nombre d'actifs en position ouverte
  assets: AssetPerformance[] // DÃ©tails par actif
}
```

### **Fonction principale**

```typescript
export function calculatePortfolioMetrics(
  assets: Asset[],
  transactions: Transaction[]
): PortfolioMetrics
```

**ResponsabilitÃ©s** :

1. Calcule les quantitÃ©s nettes par actif (achats - ventes)
2. Filtre les positions ouvertes (quantitÃ© > 0)
3. Calcule le PMA avec frais pour chaque actif
4. Calcule les mÃ©triques de performance individuelles
5. AgrÃ¨ge les mÃ©triques globales du portefeuille
6. Trie les actifs par valeur dÃ©croissante

---

## ğŸ¨ Design & UX

### **Palette de couleurs**

| Ã‰lÃ©ment             | Gradient                     | Usage             |
| ------------------- | ---------------------------- | ----------------- |
| **Valeur Totale**   | `#667eea â†’ #764ba2` (Violet) | Card 1 KPI        |
| **Montant Investi** | `#f093fb â†’ #f5576c` (Rose)   | Card 2 KPI        |
| **Plus-Value**      | `#4ade80 â†’ #22c55e` (Vert)   | Card 3 si PnL > 0 |
| **Moins-Value**     | `#f87171 â†’ #ef4444` (Rouge)  | Card 3 si PnL < 0 |

### **Animations**

- **Hover Cards** : `translateY(-4px)` + ombre portÃ©e
- **Hover Lignes** : `translateX(4px)`
- **Fade In** : Animation d'apparition progressive
- **Transitions** : `0.2s ease` pour toutes les transformations

### **Responsive Design**

- Grid KPI : `repeat(auto-fit, minmax(280px, 1fr))`
- Tableau : Scroll horizontal sur petits Ã©crans
- Breakpoints adaptÃ©s pour mobile/tablette/desktop

---

## ğŸ“¦ Installation & Utilisation

### **PrÃ©requis**

- Node.js >= 18
- npm >= 9
- Base de donnÃ©es Prisma configurÃ©e

### **Installation**

```bash
cd wealthtracker
npm install
```

### **DÃ©veloppement**

```bash
npm run dev
```

### **Build production**

```bash
npm run build
```

### **Navigation**

1. Lancez l'application
2. Cliquez sur l'onglet **ğŸ“ˆ Dashboard** dans la navigation
3. Le Dashboard se charge automatiquement avec vos donnÃ©es

---

## ğŸ§ª Tests & Validation

### **ScÃ©narios testÃ©s**

âœ… **Calcul PMA avec frais multiples**  
âœ… **Positions partiellement vendues**  
âœ… **Positions entiÃ¨rement fermÃ©es (masquÃ©es)**  
âœ… **Performances positives et nÃ©gatives**  
âœ… **Actifs multiples avec catÃ©gories diffÃ©rentes**  
âœ… **Ã‰tat vide (aucune transaction)**  
âœ… **Mise Ã  jour prix en temps rÃ©el**  
âœ… **Responsive design multi-Ã©crans**

### **Validation TypeScript**

```bash
npm run typecheck
# âœ“ Aucune erreur TypeScript
```

### **Validation ESLint**

```bash
npm run lint
# âœ“ Aucun warning
```

### **Build production**

```bash
npm run build
# âœ“ Build rÃ©ussi
```

---

## ğŸš€ AmÃ©liorations futures (Roadmap v0.5.0)

- [ ] **Graphiques historiques** : Ã‰volution de la valeur du portefeuille
- [ ] **Filtres** : Par catÃ©gorie, par performance, par date
- [ ] **Export PDF** : Rapport de portefeuille
- [ ] **Alertes** : Notifications pour seuils de performance
- [ ] **Comparaison** : Benchmarking avec indices boursiers
- [ ] **Dividendes** : Suivi des revenus passifs
- [ ] **Multi-devises** : Support EUR, USD, GBP
- [ ] **Dark Mode** : ThÃ¨me sombre

---

## ğŸ“ Notes de version

### **v0.4.0** - 25 novembre 2025

#### âœ¨ NouveautÃ©s

- ğŸ¯ **Dashboard complet** avec KPI Cards animÃ©es
- ğŸ“Š **Calcul automatique PMA** avec frais inclus
- ğŸ“ˆ **Price Ticker** dÃ©placÃ© sur Dashboard
- ğŸ“‘ **Analyse dÃ©taillÃ©e par actif** avec accordion
- ğŸ¨ **Design moderne** type Bloomberg Terminal

#### ğŸ”§ AmÃ©liorations

- ğŸš€ **Performance** : Calculs optimisÃ©s avec Map
- ğŸ“± **Responsive** : Adaptable mobile/tablette/desktop
- â™¿ **AccessibilitÃ©** : Navigation au clavier amÃ©liorÃ©e
- ğŸ§© **Code** : SÃ©paration logique mÃ©tier / UI

#### ğŸ› Corrections

- âœ… Suppression PriceTicker de TransactionsPage
- âœ… Gestion Ã©tat vide (aucune position)
- âœ… Formatage Prettier appliquÃ©
- âœ… Import inutilisÃ©s supprimÃ©s

---

## ğŸ“š Ressources

- **Documentation Prisma** : https://www.prisma.io/docs
- **Lucide Icons** : https://lucide.dev
- **Electron** : https://www.electronjs.org
- **React** : https://react.dev

---

## ğŸ‘¥ Contributeurs

- **DÃ©veloppeur principal** : Ã‰quipe WealthTracker
- **Design** : InspirÃ© Bloomberg Terminal
- **Tests** : Validation manuelle complÃ¨te

---

## ğŸ“„ Licence

MIT License - Voir fichier `LICENSE` Ã  la racine du projet

---

**WealthTracker v0.4.0** - _Gestion professionnelle de portefeuille financier_ ğŸ’°
